<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Muscle - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Barlow+Semi+Condensed:100,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
    <style> 
    body{
        background-image: url("images/login.jpg");
        background-position: top right; /* Center the image */
        background-repeat: no-repeat; /* Do not repeat the image */
        background-color:black;
        background-size: cover;
    }
    </style>
     
  </head>

  <body>

<div class="container1">

  	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand py-2 px-4" style="font-size: 18px;" href="index.html">CloudFit</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>
	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
	          <li class="nav-item active"><a href="login.html" class="nav-link">Login</a></li>

	        </ul>
	      </div>
		  </div>
	  </nav>
    <!-- END nav -->
<section class="ftco-section contact-section">  
  <div class = "row">



					<div class="col-md-4"></div>
          <div class="col-md-4 ftco-animate">
            <form action="#" style = "background-color:white;  padding:5%; display:flex; justify-content: center; flex-direction: column;   align-items: center;
"class="contact-form">

            	
            		<div class="col-md-6">

	                <div class="form-group">
	                  <input type="text" class="form-control uname" placeholder="Username">
	                </div>
                </div>

                <div class="col-md-6">
	                <div class="form-group">
	                  <input type="text" class="form-control upwd" placeholder="Password">
	                </div>
	                </div>

              <div class = "row" style = "display: flex; flex-direction: column;">
              <div class="form-group" style = "margin-left: 2%">
                <input type="button " value="Login" class="btn btn-primary py-3 px-5 done">
              </div>

              <span class="psw"><a href="#" >Forgot your password?</a></span>
              <span class="psw"><a href="create_user.html" >Create New Account</a></span>

            </div>
            </form>

            

  </div>

  <div class="modal" id="exampleModal"   aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" >
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Create New Account</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>

                    <div class="modal-body">
                      <form>
                       <div class="form-group">
	                  <input type="text"  class="newname " style="width:90%"  placeholder="Username">
	                </div>
                

                
	                <div class="form-group">
	                  <input type="password" class="newpwd" style="width:90%"  placeholder="Password">
                  </div>
                  <div class="form-group">
	                  <input type="text" style="width:90%" class="gym" placeholder="Gym(Preencer apenas se for PT)">
	                </div>

									<input type="radio" name="choice" value="Gym">Gym<br>
									<input type="radio" name="choice" value="Personal Trainer">Personal Trainer<br>
									<input type="radio" name="choice" value="Atlete">Atlete<br>
                                        
	                          <div class="form-group" style = "margin-left: 3%;">
                <input type="button" value="Create" style="background-color:red magenta;" class="btn btn-primary py-3 px-5 create" class="Close" data-dismiss="modal">
              </div>
            </div>
                      </form>
                    </div> 
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div>

</section>
   
  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

</div>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
          <script>
              $(document).ready(function(){
                window.localStorage.clear()
                var radiovalue;
                $("input[type='radio']").click(function(){
                  radiovalue =$("input[name='choice']:checked").val()
                  console.log(radiovalue)
                })
                $(".curto").hide();
                $(".curtop").hide();
                $(".erro").hide();
                if (window.localStorage.getItem("NumUsers")==null){
                    window.localStorage.setItem("NumUsers",0)
                }
                if (window.localStorage.getItem("numPersonalT")==null){
                    window.localStorage.setItem("numPersonalT",0)
                }
                if (window.localStorage.getItem("numAtribuicao")==null){
                    window.localStorage.setItem("numAtribuicao",0)
                }
                var namechecker
                var pwdchecker
                $(".close").click(function(){
                    $(".modal").hide();
                    $(".curto").hide();
                    $(".curtop").hide();
                    $(".newname").val('');
                    $(".newpwd").val('');
                  });
                $(".newaccountbtn").click(function(){
                      $(".modal").show();
                      namechecker=true;
                      pwdchecker=true;
                  });
                $(".create").click(function(){
                    var nome =$(".newname").val();
                    var pwd = $(".newpwd").val();
                    var gym = $(".gym").val();
                    console.log(gym)
                    var user={};
                    console.log("aa")
                    if(nome.length < 4){
                        $(".curto").show();
                        namechecker=false;
                    }else{
                        $(".curto").hide();
                        namechecker=true;
                    }
                    if(pwd.length < 8){
                        $(".curtop").show()
                        pwdchecker=false;
                    }else{
                        $(".curtop").hide();
                        pwdchecker=true;
                    }
                    if(namechecker && pwdchecker){
                    if (radiovalue=="Gym"){
                      user={
                        "Name":nome,
                        "pwd":pwd,
                        "tipo":radiovalue,
                        "Pts":[]
                      }
                      window.localStorage.setItem("user"+window.localStorage.getItem("NumUsers"),JSON.stringify(user));
                      window.localStorage.setItem("NumUsers",parseInt(window.localStorage.getItem("NumUsers"))+1);
                    }else if(radiovalue=="Personal Trainer"){
                      var gyms=[];
                      window.localStorage.setItem("numPersonalT", parseInt(window.localStorage.getItem("numPersonalT"))+1)
                        user={
                        "Name":nome,
                        "pwd":pwd,
                        "tipo":radiovalue,
                        "Atletas":[],
                        "Gym":gym
                        }
                        window.localStorage.setItem("user"+window.localStorage.getItem("NumUsers"),JSON.stringify(user));
                        for (var d=0;d<parseInt(window.localStorage.getItem("NumUsers"));d++) {
                        var data=JSON.parse(window.localStorage.getItem("user"+d));
                        if(data.tipo=="Gym"){
                          if(data.Name==gym){
                            console.log("aaaa")
                          data.Pts.push("user"+window.localStorage.getItem("NumUsers"));
                          window.localStorage.setItem("user"+d,JSON.stringify(data))
                        }
                        }
                      }
                        window.localStorage.setItem("NumUsers",parseInt(window.localStorage.getItem("NumUsers"))+1)
                    }else{
                      var personalTrainers;
                      personalTrainers=[]
                      for (var b=0;b<parseInt(window.localStorage.getItem("NumUsers"));b++) {
                        var data=JSON.parse(window.localStorage.getItem("user"+b));
                        if(data.tipo=="Personal Trainer"){
                          personalTrainers.push("user"+b);
                        }
                      }
                      if(personalTrainers.length==0){ 
                        console.log("Impossivel criar atleta, não existem Pt's")
                      }else{
                        if(parseInt(window.localStorage.getItem("numAtribuicao"))>parseInt(window.localStorage.getItem("numPersonalT"))-1){
                        window.localStorage.setItem("numAtribuicao",0)
                      }
                      user={
                        "Name":nome,
                        "pwd":pwd,
                        "tipo":radiovalue,
                        "PlanosTreino":[],
                        "Pt":personalTrainers[window.localStorage.getItem("numAtribuicao")]
                        
                      }
                      window.localStorage.setItem("user"+window.localStorage.getItem("NumUsers"),JSON.stringify(user));
                      var PT=JSON.parse(window.localStorage.getItem(personalTrainers[window.localStorage.getItem("numAtribuicao")]));
                      console.log(PT.Atletas)
                      PT.Atletas.push("user"+window.localStorage.getItem("NumUsers"))
                      window.localStorage.setItem("NumUsers",parseInt(window.localStorage.getItem("NumUsers"))+1);
                      }
                    }
                    var ginasio=JSON.parse(window.localStorage.getItem("user0"));
                    console.log(ginasio.Pts)
                }
                });
                $(".done").click(function(){
                    var nomeuser= $(".uname").val();
                    var pwduser = $(".upwd").val();
                    var UserExists=false;
                    for (var c=0;c<parseInt(window.localStorage.getItem("NumUsers"));c++) {
                        var Utilizador=JSON.parse(window.localStorage.getItem("user"+c));
                        if(Utilizador.Name==nomeuser && pwduser==Utilizador.pwd){
                            UserExists=true;
                            window.localStorage.setItem("Data",window.localStorage.getItem("user"+c))
                        }
                    }
                    if(UserExists){
                        console.log("SUCESS")
                        $(".erro").hide();
                      }else{
                        $(".erro").show();
                    }
                });
              });
          </script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>
    
  </body>
</html>